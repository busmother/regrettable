<b> <%=link_to @apology_user.name, @apology_user%> </b> apologises for <b> <%=link_to @apology.incident.name, @apology.incident%> </b> 
<br>
<br>
<%= @apology.body%>
<br>
<br>


<% if @apology.forgiven?(current_user) && @apology.forgives_count > 2%>
    <em><%= link_to "You", current_user%>, <%link_to @apology.forgivenesses.first.user.name, @apology.forgivenesses.first.user%> and <%=@apology.forgivenesses.count-2%> others forgive this:</em>

<% elsif @apology.forgiven?(current_user) && @apology.forgives_count == 2 %>
    <em><%= link_to "You", current_user%> and <%link_to @apology.forgivenesses.first.user.name, @apology.forgivenesses.first.user%> forgive this:</em>

<% elsif @apology.forgiven?(current_user) && @apology.forgives_count == 1 %>
    <em><%= link_to "You", current_user%> apologize for this:</em>

<% elsif !@apology.forgiven?(current_user) && @apology.forgives_count > 3%>
     <em><%= link_to @apology.forgivenesses.first.user.name, @apology.forgivenesses.first.user.name%> and <%=@apology.forgivenesses.users.count-1%> others forgive this.</em>

<% elsif !@apology.forgiven?(current_user) && @apology.forgives_count == 2%>
    <em><%= link_to @apology.forgivenesses.first.user.name, @apology.forgivenesses.first.user.name %> and <%= link_to @apology.forgivenesses.last.user.name, @user_path%> forgive this.</em>

<% elsif !@apology.forgiven?(current_user) && @apology.forgives_count == 1%>
    <em><%= link_to @apology.forgivenesses.first.user.name, @apology.forgivenesses.first.user.name %> forgives this.</em>

<% else %>
    <em>No one forgives this yet - will you be the first?</em>
<%end%>
<br><br>

<br><br>
<% if @apology.forgiven?(current_user) %>
    <%= link_to "Unforgive", forgiveness_path(@apology), method: "delete" %>
<% else %>
    <%= link_to "Forgive", forgiveness_path(@apology), method: "put" %>
<% end %>
<br><br>
<% if @apology.user == current_user %>
    <%= link_to "Edit Apology" %>
    <br>
    <%= link_to "Remove Apology" %>
<% end %>